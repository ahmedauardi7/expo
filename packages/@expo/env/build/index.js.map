{"version":3,"file":"index.js","names":["_chalk","data","_interopRequireDefault","require","dotenv","_interopRequireWildcard","_dotenvExpand","_getenv","_nodeConsole","_nodeFs","_nodePath","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","debug","isEnabled","boolish","KNOWN_MODES","exports","LOADED_ENV_NAME","overwrittenKeys","Set","getEnvFiles","mode","process","env","NODE_ENV","silent","logError","console","error","logWarning","warn","includes","filter","Boolean","parseEnvFiles","envFiles","systemEnv","files","loadedEnvVars","loadedEnvFiles","reverse","forEach","envFile","envFileContent","fs","readFileSync","envFileParsed","parse","push","key","keys","code","expandEnvFromSystem","loadEnvFiles","force","result","loaded","JSON","parsed","loadedEnvKeys","add","stringify","parsedEnv","expandedEnv","allExpandedEnv","dotenvExpand","processEnv","parseProjectEnv","projectRoot","options","map","path","join","loadProjectEnv","logLoadedEnv","envInfo","length","log","chalk","gray","file","basename","memo","load","values","getFiles"],"sources":["../src/index.ts"],"sourcesContent":["import chalk from 'chalk';\nimport * as dotenv from 'dotenv';\nimport { expand as dotenvExpand } from 'dotenv-expand';\nimport { boolish } from 'getenv';\nimport console from 'node:console';\nimport fs from 'node:fs';\nimport path from 'node:path';\n\nconst debug = require('debug')('expo:env') as typeof console.log;\n\n/** Determine if the `.env` files are enabled or not, through `EXPO_NO_DOTENV` */\nexport function isEnabled() {\n  return !boolish('EXPO_NO_DOTENV', false);\n}\n\n/** All conventional modes that should not cause warnings */\nexport const KNOWN_MODES = ['development', 'test', 'production'];\n\n/** The environment variable name to use when marking the environment as loaded */\nexport const LOADED_ENV_NAME = '__EXPO_ENV_LOADED';\n\nconst overwrittenKeys = new Set<string>();\n\n/**\n * Get a list of all `.env*` files based on the `NODE_ENV` mode.\n * This returns a list of files, in order of highest priority to lowest priority.\n *\n * @see https://github.com/bkeepers/dotenv/tree/v3.1.4#customizing-rails\n */\nexport function getEnvFiles({\n  mode = process.env.NODE_ENV,\n  silent,\n}: {\n  /** The mode to use when creating the list of `.env*` files, defaults to `NODE_ENV` */\n  mode?: string;\n  /** If possible misconfiguration warnings should be logged, or only logged as debug log */\n  silent?: boolean;\n} = {}) {\n  if (!isEnabled()) {\n    debug(`Skipping .env files because EXPO_NO_DOTENV is defined`);\n    return [];\n  }\n\n  const logError = silent ? debug : console.error;\n  const logWarning = silent ? debug : console.warn;\n\n  if (!mode) {\n    logError(\n      `The NODE_ENV environment variable is required but was not specified. Ensure the project is bundled with Expo CLI or NODE_ENV is set. Using only .env.local and .env`\n    );\n    return ['.env.local', '.env'];\n  }\n\n  if (!KNOWN_MODES.includes(mode)) {\n    logWarning(\n      `NODE_ENV=\"${mode}\" is non-conventional and might cause development code to run in production. Use \"development\", \"test\", or \"production\" instead. Continuing with non-conventional mode`\n    );\n  }\n\n  // see: https://github.com/bkeepers/dotenv/tree/v3.1.4#customizing-rails\n  return [\n    `.env.${mode}.local`,\n    // Don't include `.env.local` for `test` environment\n    // since normally you expect tests to produce the same\n    // results for everyone\n    mode !== 'test' && `.env.local`,\n    `.env.${mode}`,\n    `.env`,\n  ].filter(Boolean) as string[];\n}\n\n/**\n * Parse all environment variables using the list of `.env*` files, in order of higest priority to lowest priority.\n * This does not check for collisions of existing system environment variables, or mutates the system environment variables.\n */\nexport function parseEnvFiles(\n  envFiles: string[],\n  {\n    systemEnv = process.env,\n  }: {\n    /** The system environment to use when expanding environment variables, defaults to `process.env` */\n    systemEnv?: NodeJS.ProcessEnv;\n  } = {}\n) {\n  if (!isEnabled()) {\n    debug(`Skipping .env files because EXPO_NO_DOTENV is defined`);\n    return { env: {}, files: [] };\n  }\n\n  // Load environment variables from .env* files. Suppress warnings using silent\n  // if this file is missing. Dotenv will only parse the environment variables,\n  // `@expo/env` will set the resulting variables to the current process.\n  // Variable expansion is supported in .env files, and executed as final step.\n  // https://github.com/motdotla/dotenv\n  // https://github.com/motdotla/dotenv-expand\n  const loadedEnvVars: dotenv.DotenvParseOutput = {};\n  const loadedEnvFiles: string[] = [];\n\n  // Iterate over each dotenv file in lowest prio to highest prio order.\n  // This step won't write to the process.env, but will overwrite the parsed envs.\n  [...envFiles].reverse().forEach((envFile) => {\n    try {\n      const envFileContent = fs.readFileSync(envFile, 'utf8');\n      const envFileParsed = dotenv.parse(envFileContent);\n\n      // If there are parsing issues, mark the file as not-parsed\n      if (!envFileParsed) {\n        return debug(`Failed to load environment variables from: ${envFile}%s`);\n      }\n\n      loadedEnvFiles.push(envFile);\n      debug(`Loaded environment variables from: ${envFile}`);\n\n      for (const key of Object.keys(envFileParsed)) {\n        if (typeof loadedEnvVars[key] !== 'undefined') {\n          debug(`\"${key}\" is already defined and overwritten by: ${envFile}`);\n        }\n\n        loadedEnvVars[key] = envFileParsed[key];\n      }\n    } catch (error: any) {\n      if ('code' in error && error.code === 'ENOENT') {\n        return debug(`${envFile} does not exist, skipping this env file`);\n      }\n      if ('code' in error && error.code === 'EISDIR') {\n        return debug(`${envFile} is a directory, skipping this env file`);\n      }\n      if ('code' in error && error.code === 'EACCES') {\n        return debug(`No permission to read ${envFile}, skipping this env file`);\n      }\n\n      throw error;\n    }\n  });\n\n  return {\n    env: expandEnvFromSystem(loadedEnvVars, systemEnv),\n    files: loadedEnvFiles.reverse(),\n  };\n}\n\n/**\n * Parse all environment variables using the list of `.env*` files, and mutate the system environment with these variables.\n * This won't override existing environment variables defined in the system environment.\n * Once the mutations are done, this will also set a propert `__EXPO_ENV=true` on the system env to avoid multiple mutations.\n * This check can be disabled through `{ force: true }`.\n */\nexport function loadEnvFiles(\n  envFiles: string[],\n  {\n    force,\n    silent = false,\n    systemEnv = process.env,\n  }: Parameters<typeof parseEnvFiles>[1] & {\n    /** If the environment variables should be applied to the system environment, regardless of previous mutations */\n    force?: boolean;\n    /** If possible misconfiguration warnings should be logged, or only logged as debug log */\n    silent?: boolean;\n  } = {}\n) {\n  if (!force && systemEnv[LOADED_ENV_NAME]) {\n    return { result: 'skipped' as const, loaded: JSON.parse(systemEnv[LOADED_ENV_NAME]) };\n  }\n\n  const parsed = parseEnvFiles(envFiles, { systemEnv });\n  const loadedEnvKeys: string[] = [];\n\n  for (const key in parsed.env) {\n    if (\n      typeof systemEnv[key] !== 'undefined' &&\n      // If the key was previously overwritten by the .env file then it can be overwritten again.\n      !overwrittenKeys.has(key)\n    ) {\n      debug(`\"${key}\" is already defined and IS NOT overwritten`);\n    } else {\n      overwrittenKeys.add(key);\n      systemEnv[key] = parsed.env[key];\n      loadedEnvKeys.push(key);\n    }\n  }\n\n  // Mark the environment as loaded\n  systemEnv[LOADED_ENV_NAME] = JSON.stringify(loadedEnvKeys);\n\n  return { result: 'loaded' as const, ...parsed, loaded: loadedEnvKeys };\n}\n\n/**\n * Expand the parsed environment variables using the existing system environment variables.\n * This does not mutate the existing system environment variables, and only returns the expanded variables.\n */\nfunction expandEnvFromSystem(\n  parsedEnv: Record<string, string>,\n  systemEnv: NodeJS.ProcessEnv = process.env\n) {\n  const expandedEnv: Record<string, string> = {};\n\n  // Pass a clone of the system environment variables to avoid mutating the original environment.\n  // When the expansion is done, we only store the environment variables that were initially parsed from `parsedEnv`.\n  const allExpandedEnv = dotenvExpand({\n    parsed: parsedEnv,\n    processEnv: { ...systemEnv } as Record<string, string>,\n  });\n\n  if (allExpandedEnv.error) {\n    console.error(\n      `Failed to expand environment variables, using non-expanded environment variables: ${allExpandedEnv.error}`\n    );\n    return parsedEnv;\n  }\n\n  // Only store the values that were initially parsed, from `parsedEnv`.\n  for (const key of Object.keys(parsedEnv)) {\n    if (allExpandedEnv.parsed?.[key]) {\n      expandedEnv[key] = allExpandedEnv.parsed[key];\n    }\n  }\n\n  return expandedEnv;\n}\n\n/**\n * Parse all environment variables using the detected list of `.env*` files from a project.\n * This does not check for collisions of existing system environment variables, or mutates the system environment variables.\n */\nexport function parseProjectEnv(\n  projectRoot: string,\n  options?: Parameters<typeof getEnvFiles>[0] & Parameters<typeof parseEnvFiles>[1]\n) {\n  return parseEnvFiles(\n    getEnvFiles(options).map((envFile) => path.join(projectRoot, envFile)),\n    options\n  );\n}\n\n/**\n * Parse all environment variables using the detected list of `.env*` files from a project.\n * This won't override existing environment variables defined in the system environment.\n * Once the mutations are done, this will also set a propert `__EXPO_ENV=true` on the system env to avoid multiple mutations.\n * This check can be disabled through `{ force: true }`.\n */\nexport function loadProjectEnv(\n  projectRoot: string,\n  options?: Parameters<typeof getEnvFiles>[0] & Parameters<typeof loadEnvFiles>[1]\n) {\n  return loadEnvFiles(\n    getEnvFiles(options).map((envFile) => path.join(projectRoot, envFile)),\n    options\n  );\n}\n\n/** Log the loaded environment info from the loaded results */\nexport function logLoadedEnv(\n  envInfo: ReturnType<typeof loadEnvFiles>,\n  options: Parameters<typeof loadEnvFiles>[1] = {}\n) {\n  // Skip when running in force mode, or no environment variables are loaded\n  if (options.force || options.silent || !envInfo.loaded.length) return envInfo;\n\n  // Log the loaded environment files, when not skipped\n  if (envInfo.result === 'loaded') {\n    console.log(\n      chalk.gray('env: load', envInfo.files.map((file) => path.basename(file)).join(' '))\n    );\n  }\n\n  // Log the loaded environment variables\n  console.log(chalk.gray('env: export', envInfo.loaded.join(' ')));\n\n  return envInfo;\n}\n\n// Legacy API - for backwards compatibility\n\nlet memo: ReturnType<typeof parseEnvFiles> | null = null;\n\n/**\n * Get the environment variables without mutating the environment.\n * This returns memoized values unless the `force` property is provided.\n *\n * @deprecated use {@link parseProjectEnv} instead\n */\nexport function get(\n  projectRoot: string,\n  {\n    force,\n    silent,\n  }: {\n    force?: boolean;\n    silent?: boolean;\n  } = {}\n) {\n  if (!isEnabled()) {\n    debug(`Skipping .env files because EXPO_NO_DOTENV is defined`);\n    return { env: {}, files: [] };\n  }\n  if (force || !memo) {\n    memo = parseProjectEnv(projectRoot, { silent });\n  }\n  return memo;\n}\n\n/**\n * Load environment variables from .env files and mutate the current `process.env` with the results.\n *\n * @deprecated use {@link loadProjectEnv} instead\n */\nexport function load(\n  projectRoot: string,\n  options: {\n    force?: boolean;\n    silent?: boolean;\n  } = {}\n) {\n  if (!isEnabled()) {\n    debug(`Skipping .env files because EXPO_NO_DOTENV is defined`);\n    return process.env;\n  }\n\n  const envInfo = get(projectRoot, options);\n  const loadedEnvKeys: string[] = [];\n\n  for (const key in envInfo.env) {\n    if (\n      typeof process.env[key] !== 'undefined' &&\n      // If the key was previously overwritten by the .env file then it can be overwritten again.\n      !overwrittenKeys.has(key)\n    ) {\n      console.log('overwrittenKeys', key, [...overwrittenKeys.values()]);\n\n      debug(`\"${key}\" is already defined and IS NOT overwritten`);\n    } else {\n      console.log('set key', key);\n      // Avoid creating a new object, mutate it instead as this causes problems in Bun\n      overwrittenKeys.add(key);\n      process.env[key] = envInfo.env[key];\n      loadedEnvKeys.push(key);\n    }\n  }\n\n  // Port the result of `get` to the newer result object\n  logLoadedEnv({ ...envInfo, result: 'loaded', loaded: loadedEnvKeys }, options);\n\n  return process.env;\n}\n\n/**\n * Get a list of all `.env*` files based on the `NODE_ENV` mode.\n * This returns a list of files, in order of highest priority to lowest priority.\n *\n * @deprecated use {@link getEnvFiles} instead\n * @see https://github.com/bkeepers/dotenv/tree/v3.1.4#customizing-rails\n */\nexport function getFiles(mode: string | undefined, { silent = false }: { silent?: boolean } = {}) {\n  if (!isEnabled()) {\n    debug(`Skipping .env files because EXPO_NO_DOTENV is defined`);\n    return [];\n  }\n\n  return getEnvFiles({ mode, silent });\n}\n"],"mappings":"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","ignoreList":[]}